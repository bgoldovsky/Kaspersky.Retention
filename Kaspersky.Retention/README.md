# Kaspersky.Services.Retention

Микросервис применяющий заданные политики к хранилищу резервных копий.

## Политики хранения

Резервные копии создаются дважды в сутки.
(По умолчанию в 8:00 и 20:00)

| Поколение | Период хранения (дни)    | Максимальное количество копий |
|  :---:    | :---:                    |  :----:   |     
| 3         | \>14                     | 1         | 
| 2         | 7-14                     | 4         | 
| 1         | 3-7                      | 4         |
| 0         | 0-3                      | 4         | 

## Технологический стек

* C# 7.3
* .NET Core 2.2
* Hangfire scheduler

## Слои сервиса

0. **Host.** Хост микросервиса, точка входа, подключение зависимостей.
0. **Scheduler** Сервис деактивации истекших платежных карт по расписанию.
0. **Grpc.** Объявление gRPC-контрактов микросервиса, клиент для его вызова.
0. **Application.** Сервисы инкапсулирующие бизнес-логику вызова агрегата и работу с репозиториями.
0. **Domain.** Доменная модель микросервиса и контракты агрегатов.
0. **Events.** События генерируемые микросервисом.
0. **Events.Protobuf.** Библиотека для protobuf сериализации событий микросервиса

## Примитивы

#### BackupGeneration

- [ ] Zero = 0
- [ ] First = 1
- [ ] Second = 2
- [ ] Third = 3

Определяют к какому поколению относится резервная копия и какую политику к ней следует применить
    
License [GNU GPLv3](http://www.gnu.org/licenses/gpl-3.0.txt)

© Boris B Goldovsky, 2019